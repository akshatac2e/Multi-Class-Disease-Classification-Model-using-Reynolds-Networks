# Blood Cell Analysis System Configuration
# ==========================================

# Model Architecture
architecture:
  # Segmentation model settings
  segmentation:
    input_shape: [512, 512, 3]
    num_classes: 3  # Background, RBC, WBC
    use_stain_norm: true
  
  # RBC Classifier settings
  rbc_classifier:
    input_shape: [130, 130, 3]
    num_classes: 3  # healthy_RBC, malaria_RBC, sickle_RBC
    d_reduced: 64   # Reynolds dimension (32=fast, 64=balanced, 128=accurate)
    use_domain_adapt: true
  
  # WBC Classifier settings
  wbc_classifier:
    input_shape: [130, 130, 3]
    num_classes: 2  # healthy_WBC, leukemia_WBC
    d_reduced: 64
    use_domain_adapt: true

# Training Configuration
training:
  # General settings
  learning_rate: 0.0001
  batch_size: 32
  validation_split: 0.2
  seed: 42
  
  # Epochs per model
  epochs:
    segmentation: 50
    rbc_classifier: 50
    wbc_classifier: 50
  
  # Data augmentation
  augmentation:
    rotation_range: 360
    width_shift_range: 0.2
    height_shift_range: 0.2
    horizontal_flip: true
    vertical_flip: true
    zoom_range: 0.15
    brightness_range: [0.7, 1.3]
  
  # Callbacks
  early_stopping:
    patience: 10
    restore_best_weights: true
  
  reduce_lr:
    factor: 0.5
    patience: 5
    min_lr: 0.0000001
  
  # Class weights
  use_class_weights: true

# Inference Configuration
inference:
  confidence_threshold: 0.7
  uncertain_margin: 0.15
  
  # Cell extraction
  cell_extraction:
    min_area: 100
    max_area: 10000
    target_size: [130, 130]
    padding: 5
  
  # Output settings
  save_visualization: true
  save_json_report: true
  save_text_summary: true

# Paths
paths:
  # Data directories
  data:
    rbc_data: "./data/rbc_data"
    wbc_data: "./data/wbc_data"
    segmentation: "./data/segmentation"
  
  # Model directories
  models:
    checkpoints: "./checkpoints"
    final_models: "./models"
  
  # Output directories
  output:
    results: "./results"
    logs: "./logs"

# Class Labels
classes:
  rbc:
    - healthy_RBC
    - malaria_RBC
    - sickle_RBC
  
  wbc:
    - healthy_WBC
    - leukemia_WBC
  
  segmentation:
    - background
    - RBC
    - WBC
